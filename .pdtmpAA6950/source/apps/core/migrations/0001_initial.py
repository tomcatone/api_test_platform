from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(choices=[('admin', 'ç®¡ç†å“¡'), ('normal', 'æ™®é€šç”¨æˆ¶')], default='normal', max_length=20)),
                ('display_name', models.CharField(blank=True, default='', max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to='auth.user')),
            ],
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='åˆ†é¡åç¨±')),
                ('description', models.TextField(blank=True, default='', verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
            ],
            options={'verbose_name': 'åˆ†é¡', 'ordering': ['name']},
        ),
        migrations.CreateModel(
            name='GlobalVariable',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='è®Šé‡å')),
                ('value', models.TextField(verbose_name='è®Šé‡å€¼')),
                ('var_type', models.CharField(choices=[('string', 'å­—ç¬¦ä¸²'), ('number', 'æ•¸å­—'), ('boolean', 'å¸ƒçˆ¾'), ('json', 'JSON')], default='string', max_length=20, verbose_name='é¡å‹')),
                ('description', models.TextField(blank=True, default='', verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'å…¨å±€è®Šé‡', 'ordering': ['name']},
        ),
        migrations.CreateModel(
            name='DynamicVar',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='è®Šé‡åï¼ˆ{{name}}ï¼‰')),
                ('dyn_type', models.CharField(choices=[('phone', 'ğŸ‡¨ğŸ‡³ éš¨æ©Ÿä¸­åœ‹æ‰‹æ©Ÿè™Ÿ'), ('timestamp', 'â± ç•¶å‰æ™‚é–“æˆ³ï¼ˆç§’ï¼‰'), ('timestamp_ms', 'â± ç•¶å‰æ™‚é–“æˆ³ï¼ˆæ¯«ç§’ï¼‰'), ('datetime', 'ğŸ“… ç•¶å‰æ—¥æœŸæ™‚é–“'), ('date', 'ğŸ“… ç•¶å‰æ—¥æœŸ'), ('uuid', 'ğŸ”‘ éš¨æ©Ÿ UUID')], default='phone', max_length=30, verbose_name='é¡å‹')),
                ('enabled', models.BooleanField(default=True, verbose_name='å•Ÿç”¨ï¼ˆæ¯æ¬¡è«‹æ±‚å‰ç”Ÿæˆï¼‰')),
                ('description', models.TextField(blank=True, default='', verbose_name='å‚™è¨»')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={'verbose_name': 'å‹•æ…‹è®Šé‡', 'ordering': ['name']},
        ),
        migrations.CreateModel(
            name='DatabaseConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='é…ç½®åç¨±')),
                ('host', models.CharField(default='127.0.0.1', max_length=200, verbose_name='ä¸»æ©Ÿ')),
                ('port', models.IntegerField(default=3306, verbose_name='ç«¯å£')),
                ('username', models.CharField(max_length=100, verbose_name='ç”¨æˆ¶å')),
                ('password', models.CharField(max_length=200, verbose_name='å¯†ç¢¼')),
                ('database', models.CharField(max_length=100, verbose_name='æ•¸æ“šåº«å')),
                ('charset', models.CharField(default='utf8mb4', max_length=20, verbose_name='å­—ç¬¦é›†')),
                ('description', models.TextField(blank=True, default='', verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'æ•¸æ“šåº«é…ç½®', 'ordering': ['name']},
        ),
        migrations.CreateModel(
            name='RedisConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='é…ç½®åç¨±')),
                ('host', models.CharField(default='127.0.0.1', max_length=200, verbose_name='ä¸»æ©Ÿ')),
                ('port', models.IntegerField(default=6379, verbose_name='ç«¯å£')),
                ('password', models.CharField(blank=True, default='', max_length=200, verbose_name='å¯†ç¢¼')),
                ('db', models.IntegerField(default=0, verbose_name='DB ç´¢å¼• (0-15)')),
                ('description', models.TextField(blank=True, default='', verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'Redis é…ç½®', 'ordering': ['name']},
        ),
        migrations.CreateModel(
            name='EmailConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='é»˜èªéƒµä»¶é…ç½®', max_length=100, verbose_name='é…ç½®åç¨±')),
                ('smtp_host', models.CharField(max_length=200, verbose_name='SMTP ä¸»æ©Ÿ')),
                ('smtp_port', models.IntegerField(default=465, verbose_name='SMTP ç«¯å£')),
                ('use_ssl', models.BooleanField(default=True, verbose_name='ä½¿ç”¨SSL')),
                ('use_tls', models.BooleanField(default=False, verbose_name='ä½¿ç”¨TLS(STARTTLS)')),
                ('username', models.CharField(max_length=200, verbose_name='éƒµç®±è³¬è™Ÿ')),
                ('password', models.CharField(max_length=200, verbose_name='éƒµç®±å¯†ç¢¼/æˆæ¬Šç¢¼')),
                ('from_addr', models.CharField(max_length=200, verbose_name='ç™¼ä»¶äººåœ°å€')),
                ('from_name', models.CharField(default='APIæ¸¬è©¦å¹³å°', max_length=100, verbose_name='ç™¼ä»¶äººåç¨±')),
                ('is_active', models.BooleanField(default=True, verbose_name='å•Ÿç”¨')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'éƒµä»¶é…ç½®', 'ordering': ['-is_active', '-updated_at']},
        ),
        migrations.CreateModel(
            name='ApiConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='æ¥å£åç¨±')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='apis', to='core.category', verbose_name='åˆ†é¡')),
                ('url', models.TextField(verbose_name='è«‹æ±‚URL')),
                ('method', models.CharField(choices=[('GET', 'GET'), ('POST', 'POST'), ('PUT', 'PUT'), ('DELETE', 'DELETE'), ('PATCH', 'PATCH'), ('HEAD', 'HEAD'), ('OPTIONS', 'OPTIONS')], default='GET', max_length=10, verbose_name='è«‹æ±‚æ–¹å¼')),
                ('content_type', models.CharField(choices=[('json', 'JSON'), ('form', 'Form'), ('raw', 'Raw'), ('files', 'Files')], default='json', max_length=20, verbose_name='è«‹æ±‚é¡å‹')),
                ('headers', models.TextField(default='{}', verbose_name='è«‹æ±‚é ­ (JSON)')),
                ('params', models.TextField(default='{}', verbose_name='Queryåƒæ•¸ (JSON)')),
                ('body', models.TextField(default='{}', verbose_name='è«‹æ±‚é«” json= (JSON)')),
                ('use_async', models.BooleanField(default=False, verbose_name='ä½¿ç”¨ç•°æ­¥è«‹æ±‚(httpx)')),
                ('timeout', models.IntegerField(default=30, verbose_name='è¶…æ™‚ç§’æ•¸')),
                ('ssl_verify', models.CharField(choices=[('true', 'é©—è­‰ SSL è­‰æ›¸ï¼ˆé»˜èªï¼‰'), ('false', 'è·³é SSL é©—è­‰ï¼ˆå¿½ç•¥è‡ªç°½å/å…§ç¶²è­‰æ›¸ï¼‰'), ('custom', 'ä½¿ç”¨è‡ªå®šç¾© CA è­‰æ›¸')], default='true', max_length=10, verbose_name='SSL é©—è­‰æ¨¡å¼')),
                ('ssl_cert', models.CharField(blank=True, default='', max_length=500, verbose_name='è‡ªå®šç¾© CA è­‰æ›¸è·¯å¾‘')),
                ('client_cert_enabled', models.BooleanField(default=False, verbose_name='å•Ÿç”¨å®¢æˆ¶ç«¯è­‰æ›¸ (mTLS)')),
                ('client_cert', models.CharField(blank=True, default='', max_length=500, verbose_name='å®¢æˆ¶ç«¯è­‰æ›¸è·¯å¾‘ (.pem/.crt)')),
                ('client_key', models.CharField(blank=True, default='', max_length=500, verbose_name='å®¢æˆ¶ç«¯ç§é‘°è·¯å¾‘ (.pem/.key)')),
                ('extract_vars', models.TextField(default='[]', verbose_name='æå–è®Šé‡è¦å‰‡ (JSON)')),
                ('encrypted', models.BooleanField(default=False, verbose_name='å•Ÿç”¨åŠ å¯†')),
                ('encryption_key', models.CharField(blank=True, default='', max_length=200, verbose_name='åŠ å¯†å¯†é‘°(raw)')),
                ('encryption_algorithm', models.CharField(choices=[('AES', 'AES-CBC'), ('AES-GCM', 'AES-GCM'), ('BASE64', 'BASE64'), ('MD5', 'MD5')], default='AES', max_length=20, verbose_name='åŠ å¯†ç®—æ³•')),
                ('body_enc_rules', models.TextField(blank=True, default='[]', verbose_name='Bodyå­—æ®µåŠ å¯†è¦å‰‡(JSON)')),
                ('assertions', models.TextField(default='[]', verbose_name='HTTPæ–·è¨€è¦å‰‡ (JSON)')),
                ('db_assertions', models.TextField(default='[]', verbose_name='æ•¸æ“šåº«æ–·è¨€è¦å‰‡ (JSON)')),
                ('deepdiff_assertions', models.TextField(default='[]', verbose_name='DeepDiffæ–·è¨€è¦å‰‡ (JSON)')),
                ('pre_redis_rules', models.TextField(blank=True, default='[]', verbose_name='å‰ç½®Rediså–å€¼è¦å‰‡(JSON)')),
                ('pre_sql_db', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pre_apis', to='core.databaseconfig', verbose_name='å‰ç½®SQLæ•¸æ“šåº«')),
                ('pre_sql', models.TextField(blank=True, default='', verbose_name='å‰ç½®SQLï¼ˆè«‹æ±‚å‰åŸ·è¡Œï¼‰')),
                ('post_sql_db', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='post_apis', to='core.databaseconfig', verbose_name='å¾Œç½®SQLæ•¸æ“šåº«')),
                ('post_sql', models.TextField(blank=True, default='', verbose_name='å¾Œç½®SQLï¼ˆè«‹æ±‚å¾ŒåŸ·è¡Œï¼‰')),
                ('use_session', models.BooleanField(default=False, verbose_name='ä½¿ç”¨Sessionä¿æŒæœƒè©±')),
                ('body_type', models.CharField(choices=[('json', 'JSON Body'), ('data', 'Data (raw string/dict)'), ('params', 'Query Params (åˆä½µåˆ°URL)'), ('form', 'Form (application/x-www-form-urlencoded)'), ('text', 'Text (text/plain)'), ('raw', 'Raw (application/json string)'), ('files', 'Files (multipart/form-data)')], default='json', max_length=20, verbose_name='Body é¡å‹')),
                ('sort_order', models.IntegerField(default=0, verbose_name='æ’åº')),
                ('description', models.TextField(blank=True, default='', verbose_name='æ¥å£æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'APIé…ç½®', 'ordering': ['sort_order', 'id']},
        ),
        migrations.CreateModel(
            name='TestReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='å ±å‘Šåç¨±')),
                ('status', models.CharField(choices=[('running', 'åŸ·è¡Œä¸­'), ('completed', 'å·²å®Œæˆ'), ('error', 'åŸ·è¡ŒéŒ¯èª¤')], default='running', max_length=20, verbose_name='ç‹€æ…‹')),
                ('total', models.IntegerField(default=0, verbose_name='ç¸½æ•¸')),
                ('passed', models.IntegerField(default=0, verbose_name='é€šé')),
                ('failed', models.IntegerField(default=0, verbose_name='å¤±æ•—')),
                ('error', models.IntegerField(default=0, verbose_name='éŒ¯èª¤')),
                ('duration', models.FloatField(default=0.0, verbose_name='è€—æ™‚(ç§’)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
            ],
            options={'verbose_name': 'æ¸¬è©¦å ±å‘Š', 'ordering': ['-created_at']},
        ),
        migrations.CreateModel(
            name='TestResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='results', to='core.testreport')),
                ('api', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='results', to='core.apiconfig')),
                ('api_name', models.CharField(max_length=200)),
                ('url', models.TextField()),
                ('method', models.CharField(max_length=10)),
                ('use_async', models.BooleanField(default=False)),
                ('request_headers', models.TextField(default='{}')),
                ('request_params', models.TextField(default='{}')),
                ('request_body', models.TextField(default='{}')),
                ('response_status', models.IntegerField(default=0)),
                ('response_headers', models.TextField(default='{}')),
                ('response_body', models.TextField(default='')),
                ('response_time', models.FloatField(default=0.0)),
                ('status', models.CharField(choices=[('pass', 'é€šé'), ('fail', 'å¤±æ•—'), ('error', 'éŒ¯èª¤')], max_length=20)),
                ('error_message', models.TextField(blank=True, default='')),
                ('extracted_vars', models.TextField(default='{}')),
                ('assertion_results', models.TextField(default='[]')),
                ('db_assertion_results', models.TextField(default='[]')),
                ('deepdiff_results', models.TextField(default='[]')),
                ('pre_sql_result', models.TextField(default='')),
                ('post_sql_result', models.TextField(default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={'verbose_name': 'æ¸¬è©¦çµæœ', 'ordering': ['created_at']},
        ),
        migrations.CreateModel(
            name='ScheduledTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='ä»»å‹™åç¨±')),
                ('api_ids', models.TextField(default='[]', verbose_name='æ¥å£IDåˆ—è¡¨ (JSON)')),
                ('trigger_type', models.CharField(choices=[('cron', 'Cron è¡¨é”å¼'), ('interval', 'å›ºå®šé–“éš”')], default='cron', max_length=20, verbose_name='è§¸ç™¼æ–¹å¼')),
                ('cron_expr', models.CharField(blank=True, default='0 9 * * *', max_length=100, verbose_name='Cron è¡¨é”å¼')),
                ('interval_secs', models.IntegerField(default=3600, verbose_name='é–“éš”ç§’æ•¸')),
                ('report_name_tpl', models.CharField(default='å®šæ™‚ä»»å‹™-{task}', max_length=200, verbose_name='å ±å‘Šåç¨±æ¨¡æ¿')),
                ('send_email', models.BooleanField(default=False, verbose_name='åŸ·è¡Œå¾Œç™¼é€éƒµä»¶')),
                ('email_to', models.TextField(blank=True, default='', verbose_name='æ”¶ä»¶äºº(å¤šå€‹é€—è™Ÿåˆ†éš”)')),
                ('status', models.CharField(choices=[('active', 'é‹è¡Œä¸­'), ('paused', 'å·²æš«åœ'), ('stopped', 'å·²åœæ­¢')], default='active', max_length=20, verbose_name='ç‹€æ…‹')),
                ('last_run_at', models.DateTimeField(blank=True, null=True, verbose_name='ä¸Šæ¬¡åŸ·è¡Œæ™‚é–“')),
                ('last_report_id', models.IntegerField(blank=True, null=True, verbose_name='ä¸Šæ¬¡å ±å‘ŠID')),
                ('last_result', models.CharField(blank=True, default='', max_length=200, verbose_name='ä¸Šæ¬¡çµæœæ‘˜è¦')),
                ('description', models.TextField(blank=True, default='', verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='å‰µå»ºæ™‚é–“')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='æ›´æ–°æ™‚é–“')),
            ],
            options={'verbose_name': 'å®šæ™‚ä»»å‹™', 'ordering': ['-created_at']},
        ),
    ]
